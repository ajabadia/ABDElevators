const fs = require('fs');
const path = require('path');

const profiles = {
    es: {
        security: {
            password: {
                title: "Seguridad",
                currentLabel: "Contraseña Actual",
                newLabel: "Nueva Contraseña",
                confirmLabel: "Confirmar Nueva Contraseña",
                submitBtn: "Actualizar Contraseña",
                matchError: "Las contraseñas no coinciden.",
                successTitle: "Contraseña actualizada",
                successDesc: "Tu contraseña se ha cambiado correctamente.",
                updateError: "Error al cambiar contraseña"
            },
            mfa: {
                title: "Autenticación de Doble Factor (MFA)",
                description: "Añade una capa extra de seguridad a tu cuenta usando una App de autenticador.",
                statusEnabled: "Activado",
                statusDisabled: "Desactivado",
                infoEnabled: "Tu cuenta está protegida. Al iniciar sesión se te pedirá un código generado por tu aplicación (Google Authenticator, Authy, Microsoft Authenticator, etc).",
                infoDisabled: "Actualmente tu cuenta solo está protegida por tu contraseña. Te recomendamos activar el doble factor para evitar accesos no autorizados.",
                disableBtn: "Desactivar Doble Factor",
                setupBtn: "Configurar Doble Factor",
                disableConfirm: "¿Estás seguro de que quieres desactivar la protección de doble factor? Tu cuenta será menos segura.",
                setupStep1: "Escanea el código QR",
                setupStep1Desc: "Abre tu aplicación de autenticador (Google Authenticator, Authy, etc) y escanea el código de la izquierda.",
                manualKey: "O introduce la clave manualmente:",
                setupStep2: "Introduce el código de 6 dígitos",
                activateBtn: "Activar",
                verifying: "Verificando...",
                successTitle: "MFA Activado",
                successDesc: "Tu cuenta ahora está más segura.",
                invalidCode: "Código inválido",
                recoveryTitle: "¡Doble Factor Activado!",
                recoveryDesc: "Tu cuenta está ahora protegida con seguridad de grado bancario.",
                recoveryCodesTitle: "Códigos de Recuperación",
                recoveryCodesWarning: "Si pierdes el acceso a tu aplicación de autenticador, estos códigos son la UNICA forma de recuperar tu cuenta. Guárdalos en un lugar seguro (ej: un gestor de contraseñas).",
                copyCodes: "Copiar todos los códigos",
                doneBtn: "Entendido"
            },
            sessions: {
                title: "Sesiones Activas",
                description: "Dispositivos que tienen acceso actualmente a tu cuenta.",
                revokeOthersBtn: "Cerrar todas las demás",
                revokeConfirmOthers: "¿Estás seguro de que quieres cerrar sesión en todos los demás dispositivos?",
                currentBadge: "Sesión Actual",
                unknownBrowser: "Navegador desconocido",
                unknownOs: "OS desconocido",
                revokeSuccess: "Sesión cerrada",
                revokeDesc: "El dispositivo ha sido desconectado.",
                revokeError: "No se pudo cerrar la sesión.",
                cleanupSuccess: "Limpieza completada",
                cleanupDesc: "Se han cerrado todas las sesiones excepto la actual."
            }
        },
        photo: {
            title: "Foto de Perfil",
            subtitle: "PNG, JPG o GIF hasta 5MB",
            uploadError: "No se pudo subir la imagen.",
            sizeError: "La imagen es demasiado grande (máximo 5MB).",
            typeError: "Por favor selecciona un archivo de imagen.",
            successTitle: "Foto actualizada",
            successDesc: "Tu foto de perfil se ha actualizado correctamente."
        }
    },
    en: {
        security: {
            password: {
                title: "Security",
                currentLabel: "Current Password",
                newLabel: "New Password",
                confirmLabel: "Confirm New Password",
                submitBtn: "Update Password",
                matchError: "Passwords do not match.",
                successTitle: "Password updated",
                successDesc: "Your password has been changed successfully.",
                updateError: "Error changing password"
            },
            mfa: {
                title: "Two-Factor Authentication (MFA)",
                description: "Add an extra layer of security to your account using an authenticator app.",
                statusEnabled: "Enabled",
                statusDisabled: "Disabled",
                infoEnabled: "Your account is protected. When logging in, you will be asked for a code generated by your app (Google Authenticator, Authy, Microsoft Authenticator, etc).",
                infoDisabled: "Your account is currently only protected by your password. We recommend enabling two-factor to prevent unauthorized access.",
                disableBtn: "Disable Two-Factor",
                setupBtn: "Configure Two-Factor",
                disableConfirm: "Are you sure you want to disable two-factor protection? Your account will be less secure.",
                setupStep1: "Scan the QR code",
                setupStep1Desc: "Open your authenticator app (Google Authenticator, Authy, etc.) and scan the QR code on the left.",
                manualKey: "Or enter the key manually:",
                setupStep2: "Enter the 6-digit code",
                activateBtn: "Activate",
                verifying: "Verifying...",
                successTitle: "MFA Enabled",
                successDesc: "Your account is now more secure.",
                invalidCode: "Invalid code",
                recoveryTitle: "Two-Factor Enabled!",
                recoveryDesc: "Your account is now protected with bank-grade security.",
                recoveryCodesTitle: "Recovery Codes",
                recoveryCodesWarning: "If you lose access to your authenticator app, these codes are the ONLY way to recover your account. Keep them in a safe place (e.g., a password manager).",
                copyCodes: "Copy all codes",
                doneBtn: "Understood"
            },
            sessions: {
                title: "Active Sessions",
                description: "Devices currently having access to your account.",
                revokeOthersBtn: "Close all others",
                revokeConfirmOthers: "Are you sure you want to log out from all other devices?",
                currentBadge: "Current Session",
                unknownBrowser: "Unknown browser",
                unknownOs: "Unknown OS",
                revokeSuccess: "Session closed",
                revokeDesc: "The device has been disconnected.",
                revokeError: "Could not close the session.",
                cleanupSuccess: "Cleanup completed",
                cleanupDesc: "All sessions except the current one have been closed."
            }
        },
        photo: {
            title: "Profile Photo",
            subtitle: "PNG, JPG or GIF up to 5MB",
            uploadError: "Could not upload image.",
            sizeError: "The image is too large (maximum 5MB).",
            typeError: "Please select an image file.",
            successTitle: "Photo updated",
            successDesc: "Your profile photo has been updated successfully."
        }
    }
};

['es', 'en'].forEach(lang => {
    const filePath = path.join(process.cwd(), 'messages', `${lang}.json`);
    const data = JSON.parse(fs.readFileSync(filePath, 'utf8'));

    if (!data.profile) data.profile = {};
    data.profile.security = profiles[lang].security;
    data.profile.photo = profiles[lang].photo;

    fs.writeFileSync(filePath, JSON.stringify(data, null, 4), 'utf8');
    console.log(`Updated ${filePath}`);
});
